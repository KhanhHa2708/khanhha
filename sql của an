CREATE DATABASE PROJECT
GO
USE PROJECT
GO


--CREATE STUDENT TABLE--
CREATE TABLE STUDENT
(
	STUDENTID VARCHAR(50),
	STUDENTNAME VARCHAR(50),
	SUBJECTID VARCHAR(50),
	CLASSID VARCHAR(50),
    CONSTRAINT PK_STUDENT PRIMARY KEY (STUDENTID) --MAYBE NOT NECCESSARY?--
)


--CREATE SUBJECT TABLE--
CREATE TABLE SUBJECT 
(
	SUBJECTID VARCHAR(50),
	SUBJECTNAME VARCHAR(50),
	FACULTYID VARCHAR(50),
	CONSTRAINT PK_SUBJECT PRIMARY KEY (SUBJECTID) 
)


--CREATE OPEN SUBJECT TABLE--
CREATE TABLE OPENSUBJECT
(
	SUBJECTID VARCHAR(50),
	SEMESTERID VARCHAR(50),
	STARTDAY VARCHAR(50),
	ENDDAY VARCHAR(50),
)


--CREATE SEMESTER TABLE --
CREATE TABLE SEMESTER
(
	SEMESTERORDER VARCHAR(50),
	SEMESTERID VARCHAR(50),
	SEMESTERNAME VARCHAR(50),
	CONSTRAINT PK_SEMESTER PRIMARY KEY (SEMESTERID)
)

--CREATE CLASS TABLE--
CREATE TABLE CLASS
(
	CLASSID VARCHAR(50),
	SUBJECTID VARCHAR(50),
	ROOMID VARCHAR(50),
	DAYNUMBER VARCHAR(50),
	LESSON VARCHAR(50)
	TEACHERID VARCHAR(50),
	CONSTRAINT PK_CLASS PRIMARY KEY (CLASSID)
)


--CREATE ROOM TABLE--
CREATE TABLE ROOM
(
	ROOMID VARCHAR(50),
	ROOMNUMBER VARCHAR(50),
	CONSTRAINT PK_ROOM PRIMARY KEY (ROOMID)
)

--CREATE TEACHER TABLE --
CREATE TABLE TEACHER
(
	TEACHERID VARCHAR(50),
	TEACHERNAME VARCHAR(50),
	FACULTYID VARCHAR(50),
	CONSTRAINT PK_TEACHER PRIMARY KEY (TEACHERID)
)


--CREATE FACULTY TABLE--
CREATE TABLE FACULTY
(
	FACULTYNAME VARCHAR(50),
	FACULTYID VARCHAR(50),
	CONSTRAINT PK_FACULTY PRIMARY KEY (FACULTYID)
)


--CREATE DAY TABLE--
CREATE TABLE DAY
(
	DAYNUMBER VARCHAR (50),
    NUMERICORDER VARCHAR(50),
)


--CREATE LESSON TABLE--
CREATE TABLE LESSON
(
	LESSONNUMBER VARCHAR(50),
	TIMEOFLESSON VARCHAR (50),
)


ALTER TABLE OPENSUBJECT ADD CONSTRAINT FK1_OPENSUBJECT FOREIGN KEY (SUBJECTID) REFERENCES SUBJECT(SUBJECTID)
ALTER TABLE OPENSUBJECT ADD CONSTRAINT FK2_OPENSUBJECT FOREIGN KEY (SEMESTERID) REFERENCES SEMESTER(SEMESTERID)


ALTER TABLE STUDENT ADD CONSTRAINT FK_STUDENT FOREIGN KEY (CLASSID) REFERENCES CLASS(CLASSID)

ALTER TABLE CLASS ADD CONSTRAINT FK1_CLASS FOREIGN KEY (SUBJECTID) REFERENCES OPENSUBJECT(SUBJECTID)
ALTER TABLE CLASS ADD CONSTRAINT FK2_CLASS FOREIGN KEY (ROOMID) REFERENCES ROOM(ROOMID)
ALTER TABLE CLASS ADD CONSTRAINT FK3_CLASS FOREIGN KEY (TEACHERID) REFERENCES TEACHER(TEACHERID)
ALTER TABLE CLASS ADD CONSTRAINT FK4_CLASS FOREIGN KEY (LESSONNUMBER) REFERENCES LESSON(LESSONNUMBER)
ALTER TABLE CLASS ADD CONSTRAINT FK5_CLASS FOREIGN KEY (DAYNUMBER) REFERENCES DAY(DAYNUMBER)

ALTER TABLE TEACHER CONSTRAINT FK_TEACHER FOREIGN KEY (FACULTYID) REFERENCES FACULTY(FACULTYID)

--ADD DATA INTO LESSON TABLE--
INSERT INTO LESSON VALUES ('1','7H30')
INSERT INTO LESSON VALUES ('2','8H15')
INSERT INTO LESSON VALUES ('3','9H')
INSERT INTO LESSON VALUES ('4','10H')
INSERT INTO LESSON VALUES ('5','10H45')
INSERT INTO LESSON VALUES ('6','13H')
INSERT INTO LESSON VALUES ('7','13H45')
INSERT INTO LESSON VALUES ('8','14H30')
INSERT INTO LESSON VALUES ('9','15H15')
INSERT INTO LESSON VALUES ('10','16H')

--ADD DATA INTO DAY TABLE--
INSERT INTO DAY VALUES ('MONDAY','1')
INSERT INTO DAY VALUES ('TUESDAY','2')
INSERT INTO DAY VALUES ('WEDNESDAY','3')
INSERT INTO DAY VALUES ('THURSDAY','4')
INSERT INTO DAY VALUES ('FRIDAY','5')
INSERT INTO DAY VALUES ('SATURDAY','6')
--SUNDAY ???-


--INSERT STUDENT--
SELECT *
FROM STUDENT
INSERT STUDENTNAME
INSERT STUDENTID
INSERT SUBJECTID
INSERT CLASSID


--DELETE STUDENT--
SELECT *
FROM STUDENT
DELETE STUDENTNAME
DELETE STUDENTID
DELETE SUBJECTID
DELETE CLASSID

--FIND AND SORT  A CLASS--
SELECT TOP 1 CLASSID
FROM CLASS,ROOM,STUDENT
WHERE STUDENT.CLASSID=CLASS.CLASSID
AND  CLASS.ROOMID=ROOM.ROOMID
GROUP BY CLASSID
ORDER BY COUNT (NUMERICORDER) ASC
